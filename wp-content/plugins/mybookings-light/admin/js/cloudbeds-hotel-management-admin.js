!function(a){"use strict";function c(){var a=(jQuery(window).height()-jQuery(".cb_hm_ajax_message_container").outerHeight())/2,b=(jQuery(window).width()-jQuery(".cb_hm_ajax_message_container").outerWidth()-25)/2;jQuery(".cb_hm_ajax_message_container").css({left:b}),jQuery(".cb_hm_ajax_message_container").stop().animate({top:a},300)}function d(a){var b="";jQuery("#wp-"+a+"-wrap").hasClass("html-active")?b=jQuery("#"+a).val():tinyMCE.editors[a].getContent&&(b=tinyMCE.editors[a].getContent()),jQuery("#"+a).val(b)}jQuery(function(){jQuery(".spinner").length&&jQuery(".spinner").each(function(a){jQuery(this).spinner()}),jQuery(".timepicker").length&&jQuery(".timepicker").each(function(a){jQuery(this).timepicker()})}),jQuery(document).on("click",".cb_hm .cb_hm_ajax_submit",function(a){var b=jQuery(this).closest("form"),e=b.find('input[name="action"]').val(),f=!1,g=!1;switch(e){case cb_hm_ajaxobj.name+"_general_settings":d("reservation_policy"),d("custom_cancelllation_policy"),d("email_message"),d("propertydescription");break;case cb_hm_ajaxobj.name+"_edit_room":case cb_hm_ajaxobj.name+"_new_room":d("long_description")}if(b.valid()){var h={beforeSubmit:function(){var a={status:"loading",message:"Please wait..."};jQuery("body").append('<div class="cb_hm_ajax_message" />');var b=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(b(a)),c()},success:function(a){if(a.success)if("redirect"==a.status){var d=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(d(a)),c(),window.setTimeout(function(){jQuery(".cb_hm_ajax_message").stop().animate({top:"-200px"},400,function(){jQuery("body").find(".cb_hm_ajax_message").stop().remove()})},2e3),window.location.href=a.redirect_url}else switch(e){case cb_hm_ajaxobj.name+"_new_room":var d=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(d(a)),c(),window.setTimeout(function(){jQuery(".cb_hm_ajaxloader").stop().animate({top:"-200px"},400,function(){jQuery("body").find(".cb_hm_ajaxloader").stop().remove()})},2e3),document.location.href=cb_hm_ajaxobj.admin+"admin.php?page=mybookings-rooms&subpage=edit-room&room_id="+a.room_id;break;case cb_hm_ajaxobj.name+"_updatecommonrate":b.attr("action",""),jQuery(".cb_hm .updateRateperiod").click();break;case cb_hm_ajaxobj.name+"_updatecommonsell":b.attr("action",""),jQuery(".cb_hm .updateSellperiod").click();break;default:var d=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(d(a)),c(),window.setTimeout(function(){jQuery(".cb_hm_ajax_message").stop().animate({top:"-200px"},400,function(){jQuery("body").find(".cb_hm_ajax_message").stop().remove()})},2e3)}else switch(e){default:if("-1"==a)jQuery("body").find(".cb_hm_ajaxloader").html("<div class='alert msgsboard alert-danger'>Something is wrong with form submission, please reload the page</div>");else{var d=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(d(data))}}},error:function(){jQuery("body").find(".cb_hm_ajaxloader").stop({})},url:b.attr("action"),type:"post",dataType:"json",clearForm:g,resetForm:f};b.ajaxSubmit(h)}else b.find("input.error:eq(0)").focus()}),jQuery(document).on("click","#wp-mybookings .plugin-description a",function(a){a.preventDefault(),jQuery.ajax({url:"https://www.cloudbeds.com/wp-plugins/mybookings-light/update.php",data:{action:"callback",version:cb_hm_ajaxobj.version},async:!1,contentType:"application/json",dataType:"jsonp",beforeSend:function(){var a={status:"loading",message:"Please wait..."};jQuery("body").append('<div class="cb_hm_ajax_message" />');var b=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(b(a)),c()},success:function(a){console.log(a.message);var b=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(b(a)),c(),window.setTimeout(function(){jQuery(".cb_hm_ajax_message").stop().animate({top:"-200px"},400,function(){jQuery("body").find(".cb_hm_ajax_message").stop().remove()})},1e4)},error:function(){var a={status:"danger",message:"Checking Failed!!!"};jQuery("body").append('<div class="cb_hm_ajax_message" />');var b=Handlebars.compile(cb_hm_ajax_commonmessage);jQuery(".cb_hm_ajax_message").html(b(a)),c(),window.setTimeout(function(){jQuery(".cb_hm_ajax_message").stop().animate({top:"-200px"},400,function(){jQuery("body").find(".cb_hm_ajax_message").stop().remove()})},2e3)}})})}(jQuery);